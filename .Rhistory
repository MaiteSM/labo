fwrite( ka13,
file= "ka_ensemble_13.csv",
sep= "," )
table(ka19$Predicted)
dataset[clase_ternaria == "BAJA+2",
quantile(mpasivos_margen, 0.75)]
}
dataset[clase_ternaria == "BAJA+2",
quantile(mpasivos_margen, 0.75)]
quantile(dataset[clase_ternaria == "BAJA+2",]$mpasivos_margen, 0.75)
dataset <- data
quantile(dataset[clase_ternaria == "BAJA+2",]$mpasivos_margen, 0.75)
dataset[clase_ternaria == "BAJA+2", 5]
dataset[clase_ternaria == "BAJA+2", ctrx_quarter]
dataset[clase_ternaria == "BAJA+2", min(ctrx_quarter)]
# Riesgo: cuartil
mpasivos_margen_lim <- quantile(dataset[clase_ternaria == "BAJA+2",]$mpasivos_margen, 0.75)
#lectura de los datasets
dataset  <- fread("./datasets/paquete_premium_202011.csv")
library(data.table)
#Establezco el Working Directory
setwd( "d:/Datos User/Desktop/Datos esc/MCD/12 Laboratorio de Implementacion/LII/" )
#lectura de los datasets
dataset  <- fread("./datasets/paquete_premium_202011.csv")
dataset[clase_ternaria == "BAJA+2", min(ctrx_quarter)]
quantile(dataset[clase_ternaria == "BAJA+2",]$mpasivos_margen, 0.75)
dataset[clase_ternaria == "BAJA+2",quantile(mpasivos_margen, 0.75)]
# Riesgo: cuartil
mpasivos_margen_lim <- dataset[clase_ternaria == "BAJA+2",quantile(mpasivos_margen, 0.75)]
cproductos_lim <- dataset[clase_ternaria == "BAJA+2",quantile(cproductos, 0.75)]
cproductos_lim
dataset[, _r := quantile()]
dataset[, _r := quantile()]
dataset[, _r := quantile()]}
table(dataset$ctarjeta_debito)
table(dataset$ccaja_ahorro)
table(dataset$ccuenta_corriente)
vble <- ctarjeta_visa
vble <- "ctarjeta_visa"
pct <- 0.8
dataset[clase_ternaria == "BAJA+2",quantile(var, pct)]
require("data.table")
dataset[clase_ternaria == "BAJA+2",quantile(var, pct)]
quantile(dataset$cliente_edad, 0.8)
lista <- list(cliente_edad)
#Establezco el Working Directory
setwd( "d:/Datos User/Desktop/Datos esc/MCD/12 Laboratorio de Implementacion/LII/" )
#lectura de los datasets
dataset  <- fread("./datasets/paquete_premium_202011.csv")
# mpasivos_margen: monto total de la ganancia que el banco ha obtenido
# por el dinero/inversiones ue el cliente tiene en el banco
ggplot(dataset1) +
aes(x = mpasivos_margen, y = clase_ternaria) +
geom_boxplot(show.legend = F) +
labs(x = "mpasivos_margen", y = "Clase")
library(tidyverse)
# mpasivos_margen: monto total de la ganancia que el banco ha obtenido
# por el dinero/inversiones ue el cliente tiene en el banco
ggplot(dataset1) +
aes(x = mpasivos_margen, y = clase_ternaria) +
geom_boxplot(show.legend = F) +
labs(x = "mpasivos_margen", y = "Clase")
ggplot(dataset1) +
aes(x = mpasivos_margen, y = clase_ternaria) +
geom_boxplot(show.legend = F) +
labs(x = "mpasivos_margen", y = "Clase") +
scale_x_continuous(limits = c(0,10000))
# mcaja_ahorro: monto total de la caja de horro del paquete premium
ggplot(dataset1) +
aes(x = mcaja_ahorro, y = clase_ternaria) +
geom_boxplot(show.legend = F) +
labs(x = "mcaja_ahorro", y = "Clase")
ggplot(dataset1) +
aes(x = mcaja_ahorro, y = clase_ternaria) +
geom_boxplot(show.legend = F) +
labs(x = "mcaja_ahorro", y = "Clase") +
scale_x_continuous(limits = c(0,500000))
vble <- c(mpasivos_margen,cproductos,mcaja_ahorro,mdescubierto_preacordado,mcuentas_saldo,ctarjeta_visa,ctarjeta_visa_trx,mtarjeta_visa_consumo,mprestamos_personales,mpayroll,ctrx_quarter,Visa_msaldototal)
vble_lim <- dataset[clase_ternaria == "BAJA+2",quantile(ctrx_quarter, 0.8)]
vble_lim
dataset[,ifelse(ctrx_quarter <= vble_lim, paste0(ctrx_quarter,"_riesgo") := 1, paste0(ctrx_quarter,"_riesgo") := 0)]
dataset[, paste0(ctrx_quarter,"_riesgo") := 0]
dataset[, paste0("ctrx_quarter","_riesgo") := 0]
dataset[ctrx_quarter <= vble_lim, paste0("ctrx_quarter","_riesgo") := 1]
table(dataset$ctrx_quarter_riesgo)
var <- ctrx_quarter
var <- dataset$ctrx_quarter
vble_lim <- dataset[clase_ternaria == "BAJA+2",quantile(var, 0.8)]
var <- dataset$ctrx_quarter
vble_lim <- dataset[clase_ternaria == "BAJA+2",quantile(var, 0.8)]
vble_lim
var <- "ctrx_quarter"
vble_lim <- dataset[clase_ternaria == "BAJA+2",quantile(var, 0.8)]
var <- dataset$ctrx_quarter
quantile(var,0.8)
var <- dataset$ctrx_quarter[clase_ternaria == "BAJA+2",]
var <- dataset[clase_ternaria == "BAJA+2",ctrx_quarter]
#vble_lim <- dataset[clase_ternaria == "BAJA+2",quantile(var, 0.8)]
vble_lim <- quantile(var, 0.8)
vble_lim
colname(var)
colnames(var)
names(var)
quantile(dataset$mrentabilidad)
quantile(dataset$mrentabilidad, type = 1)
quantile(dataset$mrentabilidad, type =2)
quantile(dataset$mrentabilidad)
dataset[, mrentabilidad_r := rank(mrentabilidad)]
dataset[, mrentabilidad_annual_r := quantile(mrentabilidad_annual)]
library(data.table)
library(tidyverse)
#limpio la memoria
rm( list=ls() )  #remove all objects
gc()             #garbage collection
# Cargo paquetes
require("data.table")
require("tidyverse")
#Establezco el Working Directory
setwd( "d:/Datos User/Desktop/Datos esc/MCD/12 Laboratorio de Implementacion/LII/" )
#lectura de los datasets
dataset  <- fread("./datasets/paquete_premium_202011.csv")
# CLUSTERING 1: TODOS LOS BAJA+1, TODOS LOS BAJA+2 Y EL 2% DE LOS CONTINUA
# DEL PERÍODO 202001 A 202011
clus1  <- fread("./labo/exp/ST4611/cluster_de_bajas1.txt")
# CLUSTERING 2: TODOS LOS BAJA+1, TODOS LOS BAJA+2 Y EL 10% DE LOS CONTINUA
# DEL MES 202011
clus2  <- fread("./labo/exp/ST4612/cluster_de_bajas1.txt")
# CLUSTERING 2: TODOS LOS BAJA+1, TODOS LOS BAJA+2 Y EL 10% DE LOS CONTINUA
# DEL MES 202011
clus2  <- fread("./labo/exp/ST4612/cluster_de_bajas2.txt")
# CLUSTERING 3: TODOS LOS BAJA+2 DEL PERÍODO 201912 A 202011
clus3  <- fread("./labo/exp/ST4613/cluster_de_bajas.txt")
View(clus1)
res1 <- clus1 %>% group_by(cluster2) %>%
summarise(media = mean(), sd = sd())
res1 <- clus1 %>% group_by(cluster2) %>%
summarise(media = mean(.), sd = sd(.))
res1 <- clus1[, lapply(.SD, function(x){mean(x)/sd(x)}),
by= cluster2]
res1
View(res1)
rm(res1)
#Veo variables con mayor variabilidad entre medias para
cv1 <- clus1[, lapply(.SD, function(x){mean(x)}),
by= cluster2]
cv1 <- cv1[, lapply(function(x){mean(x)/sd(x)})]
cv1 <- cv1[, lapply(.SD, function(x){mean(x)/sd(x)})]
View(clus3)
View(cv1)
#Veo variables con mayor variabilidad entre medias para
medias1 <- clus1[, lapply(.SD, function(x){mean(x)}),
by= cluster2]
cv1 <- medias1[, lapply(.SD, function(x){mean(x)/sd(x)})]
View(medias1)
View(cv1)
mean(medias1$active_quarter)
sd(medias1$active_quarter)
mean(medias1$active_quarter)/sd(medias1$active_quarter)
sort(cv1)[1:15]
sort(t(cv1))[1:15]
sort(cv1)
#Veo variables con mayor variabilidad entre medias para
medias1 <- clus1[, lapply(.SD, function(x){mean(x)}),
by= cluster2]
cv1 <- medias1[, lapply(.SD, function(x){sd(x)/abs(mean(x))})]
sort(cv1)
sort(desc(cv1))
sort(cv1)
clus2 <- dataset[clus2,,on=c("numero_de_cliente")]
colnames(dataset)
nombres <- colnames(dataset)
nombres <- nombres[,c(1,159)]
nombres <- nombres[c(1,159)]
nombres <- colnames(dataset)
nombres <- nombres[-c(1,159)]
d1 <- dataset[, nombres:= NULL]
d1 <- dataset[, c("nombres"):= NULL]
d1 <- dataset[, nombres := NULL]
nombres
d1 <- dataset %>% select(numero_de_cliente, clase_ternaria)
# CLUSTERING 2: TODOS LOS BAJA+1, TODOS LOS BAJA+2 Y EL 10% DE LOS CONTINUA
# DEL MES 202011
clus2  <- fread("./labo/exp/ST4612/cluster_de_bajas2.txt")
d1 <- dataset %>% select(numero_de_cliente, clase_ternaria)
d1[clus2,,on=c("numero_de_cliente")]
clus2 <- d1[clus2,,on=c("numero_de_cliente")]
table(clus2$clase_ternaria)
table(clus2$clase_ternaria, clus2$cluster2)
table(clus2$cluster2, clus2$clase_ternaria)
# Importancia
impo1 <- fread("./labo/exp/ST4612/importancia2.txt")
View(impo1)
impo1[, importancia := abs(MeanDecreaseAccuracy)]
rownames(impo1) <- colnames(dataset)
impo1 %>% arrange(importancia)
rownames(impo1)
impo1[, vble := colnames(dataset)]
impo1[, vble := t(colnames(dataset))]
impo1$vble <- colnames(dataset)
impo1 %>% arrange(importancia)
impo1 %>% arrange(desc(importancia)) %>% select(vble, importancia)
impo1 %>% arrange(desc(importancia))
impo1 %>% arrange(desc(importancia)) %>% select(vble, importancia)
impo1 %>% arrange(desc(importancia)) %>% select(vble, importancia) %>% filter(1:10)
impo1 %>% arrange(desc(importancia)) %>% select(vble, importancia) %>%
filter(rank(importancia)<11)
impo1 %>% arrange(importancia) %>% select(vble, importancia) %>%
filter(rank(importancia)<11)
impo1 %>% arrange(importancia) %>% select(vble, importancia) %>%
filter(rank(importancia)>148)
impo1 %>% select(vble, importancia) %>%
filter(rank(importancia)>148) %>% arrange(importancia)
impo1 %>% select(vble, importancia) %>%
filter(rank(importancia)>148) %>% arrange(desc(importancia))
vbles_clus <- impo1 %>% select(vble, importancia) %>%
filter(rank(importancia)>148) %>% arrange(desc(importancia))
#limpio la memoria
rm( list=ls() )  #remove all objects
gc()             #garbage collection
#lectura del dataset completo
dataset  <- fread("./datasets/paquete_premium_202011.csv")
# CLUSTERING 2: TODOS LOS BAJA+1, TODOS LOS BAJA+2 Y EL 10% DE LOS CONTINUA
# DEL MES 202011
clus2  <- fread("./labo/exp/ST4612/cluster_de_bajas2.txt")
d1 <- dataset %>% select(numero_de_cliente, clase_ternaria)
clus2 <- d1[clus2,,on=c("numero_de_cliente")]
# Composición de los clusters según la probabilidad de baja
table(clus2$cluster2, clus2$clase_ternaria)
# Importancia
impo2 <- fread("./labo/exp/ST4612/importancia2.txt")
impo2[, importancia := abs(MeanDecreaseAccuracy)]
impo2$vble <- colnames(dataset)
vbles_clus <- impo1 %>% select(vble, importancia) %>%
filter(rank(importancia)>148) %>% arrange(desc(importancia))
vbles_clus <- impo2 %>% select(vble, importancia) %>%
filter(rank(importancia)>148) %>% arrange(desc(importancia))
vbles_clus
medias2 <- clus2[, lapply(.SD, function(x){mean(x)}),
by= cluster2]
View(medias2)
medias2[,clase_ternaria := 1]
medias2[cluster2 == 4, clase_ternaria := (511+648)/(511+648+2)]
medias2
medias2[,clase_ternaria := 0]
medias2[cluster2 == 4, clase_ternaria := (511+648)/(511+648+2)]
View(medias2)
medias2 %>% select(vbles_clus$vble)
# Composición de los clusters según la probabilidad de baja
table(clus2$cluster2, clus2$clase_ternaria)
# Creo cluster3 para separar los CONTINUA de los BAJA y obtener
# medidas resumen par estos dos clusters
clus2[, cluster3 := 1]
clus2[ cluster2 == 4, cluster3 := 2]
medias2 <- clus2[, lapply(.SD, function(x){mean(x)}),
by= cluster3]
medias2[,clase_ternaria := 0]
medias2[cluster3 == 2, clase_ternaria := (511+648)/(511+648+2)]
medias2 %>% select(vbles_clus$vble)
medias2[cluster3 == 1,] / medias2[cluster3 == 2,]
ratios2 <- medias2[cluster3 == 1,] / medias2[cluster3 == 2,]
rbind(medias2, ratios2)
ratios2[>2]
ratios2[">2"]
sort(ratios2)
vbles_clus <- impo2 %>% select(vble, importancia) %>%
filter(rank(importancia)>140) %>% arrange(desc(importancia))
sd2 <- clus2[, lapply(.SD, function(x){sd(x)}),
by= cluster3]
medias2 %>% select(vbles_clus[1])
medias2 %>% select(vbles_clus$vble)
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"), ymin=medias2$mtarjeta_visa_consumo - sd2$mtarjeta_visa_consumo,
ymax=medias2$mtarjeta_visa_consumo - sd2$mtarjeta_visa_consumo), width=0.4, colour="orange", alpha=0.9, size=1.3)
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"), ymin=medias2$mtarjeta_visa_consumo - sd2$mtarjeta_visa_consumo,
ymax=medias2$mtarjeta_visa_consumo + sd2$mtarjeta_visa_consumo), width=0.4, colour="orange", alpha=0.9, size=1.3)
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7)
ggplot(medias2) +
geom_bar( aes(x = cluster3, y = mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7)
# Composición de los clusters según la probabilidad de baja
table(clus2$cluster2, clus2$clase_ternaria)
clus2[ cluster3 == 1, n = 5886 + 1770 + 6817 + 1377]
clus2[ cluster3 == 2, n = 511 + 648 + 2]
clus2[ cluster3 == 1, n := 5886 + 1770 + 6817 + 1377]
clus2[ cluster3 == 2, n := 511 + 648 + 2]
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"), ymin=medias2$mtarjeta_visa_consumo - sd2$mtarjeta_visa_consumo/sqrt(n),
ymax=medias2$mtarjeta_visa_consumo + sd2$mtarjeta_visa_consumo/sqrt(n)), width=0.4, colour="orange", alpha=0.9, size=1.3)
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"), ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(n)), width=0.4, colour="orange", alpha=0.9, size=1.3)
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"), ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)), width=0.4, colour="orange", alpha=0.9, size=1.3)
# CLUSTERING 2: TODOS LOS BAJA+1, TODOS LOS BAJA+2 Y EL 10% DE LOS CONTINUA
# DEL MES 202011
clus2  <- fread("./labo/exp/ST4612/cluster_de_bajas2.txt")
#limpio la memoria
rm( list=ls() )  #remove all objects
gc()             #garbage collection
#lectura del dataset completo
dataset  <- fread("./datasets/paquete_premium_202011.csv")
# CLUSTERING 2: TODOS LOS BAJA+1, TODOS LOS BAJA+2 Y EL 10% DE LOS CONTINUA
# DEL MES 202011
clus2  <- fread("./labo/exp/ST4612/cluster_de_bajas2.txt")
d1 <- dataset %>% select(numero_de_cliente, clase_ternaria)
clus2 <- d1[clus2,,on=c("numero_de_cliente")]
# Composición de los clusters según la probabilidad de baja
table(clus2$cluster2, clus2$clase_ternaria)
# Creo cluster3 para separar los CONTINUA de los BAJA y obtener
# medidas resumen par estos dos clusters
clus2[, cluster3 := 1]
clus2[ cluster2 == 4, cluster3 := 2]
# Importancia
impo2 <- fread("./labo/exp/ST4612/importancia2.txt")
impo2[, importancia := abs(MeanDecreaseAccuracy)]
impo2$vble <- colnames(dataset)
vbles_clus <- impo2 %>% select(vble, importancia) %>%
filter(rank(importancia)>140) %>% arrange(desc(importancia))
medias2 <- clus2[, lapply(.SD, function(x){mean(x)}),
by= cluster3]
medias2[,clase_ternaria := 0]
medias2[cluster3 == 2, clase_ternaria := (511+648)/(511+648+2)]
medias2[ cluster3 == 1, n := 5886 + 1770 + 6817 + 1377]
medias2[ cluster3 == 2, n := 511 + 648 + 2]
sd2 <- clus2[, lapply(.SD, function(x){sd(x)}),
by= cluster3]
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"), ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3)
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"), ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3)
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip()
d_g1 <- cbind(medias2[1],medias2[2])
d_g1 <- rbind(medias2[1],medias2[2])
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "eje x", y = "eje y")
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "", y = "Consumo de tarjeta VISA)
# CLUSTERING 3: TODOS LOS BAJA+2 DEL PERÍODO 201912 A 202011
clus3  <- fread("./labo/exp/ST4613/cluster_de_bajas.txt")
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "", y = "Consumo de tarjeta VISA")
g1 <- ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "", y = "Consumo de tarjeta VISA")
for (i in vbles) {
ggplot() +
geom_bar(aes(x=c("CONTINUA","BAJA"), y=paste0("medias2$",i),
stat="identity", fill="skyblue", alpha=0.7)) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=paste0("medias2$",i) - (paste0("sd2$",i))/sqrt(medias2$n),
ymax=paste0("medias2$",i) + (paste0("sd2$",i))/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "")
}
for (i in medias2 %>% select(vbles_clus$vble)) {
ggplot() +
geom_bar(aes(x=c("CONTINUA","BAJA"), y=paste0("medias2$",i),
stat="identity", fill="skyblue", alpha=0.7)) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=paste0("medias2$",i) - (paste0("sd2$",i))/sqrt(medias2$n),
ymax=paste0("medias2$",i) + (paste0("sd2$",i))/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "")
}
g2 <- ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$ctarjeta_visa_trx),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=medias2$ctarjeta_visa_trx - (sd2$ctarjeta_visa_trx)/sqrt(medias2$n),
ymax=medias2$ctarjeta_visa_trx + (sd2$ctarjeta_visa_trx)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "", y = "Transacciones con tarjeta VISA")
g2
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "", y = "Consumo de tarjeta VISA") +
theme_bw()
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "", y = "Consumo de tarjeta VISA") +
theme_minimal()
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "", y = "Consumo de tarjeta VISA") +
theme_linedraw()
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "", y = "Consumo de tarjeta VISA") +
theme_void()
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "", y = "Consumo de tarjeta VISA") +
theme_classic()
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "", y = "Consumo de tarjeta VISA") +
theme_get()
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "", y = "Consumo de tarjeta VISA") +
theme_gray()
ggplot() +
geom_bar( aes(x=c("CONTINUA","BAJA"), y=medias2$mtarjeta_visa_consumo),
stat="identity", fill="skyblue", alpha=0.7) +
geom_errorbar( aes(x=c("CONTINUA","BAJA"),
ymin=medias2$mtarjeta_visa_consumo - (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n),
ymax=medias2$mtarjeta_visa_consumo + (sd2$mtarjeta_visa_consumo)/sqrt(medias2$n)),
width=0.4, colour="orange", alpha=0.9, size=1.3) +
coord_flip() +
labs( x = "", y = "Consumo de tarjeta VISA") +
theme_grey()
